<div class="lr__table">
    <table class="lr__table-container">
        <tr class="lr__table-tr tr-header">
            <th class="nowrap">‚Ññ –∑/–ø</th>
            <th>–û–±'—î–∫—Ç</th>
            <th>–ù–∞–∑–≤–∞ –∑–∞–±—Ä—É–¥–Ω—é—é—á–æ—ó —Ä–µ—á–æ–≤–∏–Ω–∏</th>
            <!-- EMISSION -->
            <th>–°–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è  –º–∞—Å–æ–≤–æ—ó  –≤–∏—Ç—Ä–∞—Ç–∏ –∑–∞–±—Ä—É–¥–Ω—é—é—á–æ—ó —Ä–µ—á–æ–≤–∏–Ω–∏ <br/> (qm) <br/> –≥/—Å</th>
            <th>–ó–Ω–∞—á–µ–Ω–Ω—è  –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ–≥–æ  –Ω–æ—Ä–º–∞—Ç–∏–≤—É  –≤–∏–∫–∏–¥—É –∑–∞–±—Ä—É–¥–Ω—é—é—á–æ—ó —Ä–µ—á–æ–≤–∏–Ω–∏ <br/> (qnorm) <br/> –≥/—Å</th>
            <th>–ß–∞—Å —Ä–æ–±–æ—Ç–∏ –¥–∂–µ—Ä–µ–ª–∞ –≤–∏–∫–∏–¥—É  <br/> (T) <br/> –≥–æ–¥</th>
            <th>–†–æ–∑–º—ñ—Ä  –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó  –∑–∞—Ä–æ–±—ñ—Ç–Ω–æ—ó  –ø–ª–∞—Ç–∏ <br/> (P)</th>
            <th>–°–µ—Ä–µ–¥–Ω—å–æ–¥–æ–±–æ–≤–∞ –≥—Ä–∞–Ω–∏—á–Ω–æ–¥–æ–ø—É—Å—Ç–∏–º–∞ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—è <br/> (GDK) <br/> –º–≥/–∫—É–±.–º.</th>
            <th>–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç —á–∏—Å–µ–ª—å–Ω–æ—Å—Ç—ñ  –∂–∏—Ç–µ–ª—ñ–≤ <br/> (Knas) </th>
            <th>–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞—Å–µ–ª–µ–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É <br/> (Kf)</th>
            <th>–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –∑–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–≥–æ  –ø–æ–≤—ñ—Ç—Ä—è<br/> (Kz)</th>
            <!-- CALCULATED -->
            <th>–ú–∞—Å–∞ –∑–∞–±—Ä—É–¥–Ω—é—é—á–æ—ó  —Ä–µ—á–æ–≤–∏–Ω–∏<br/> (m)</th>
            <th>–ü–æ–∫–∞–∑–Ω–∏–∫  –≤—ñ–¥–Ω–æ—Å–Ω–æ—ó  –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ—Å—Ç—ñ <br/> (A)</th>
            <th>–ö–æ–µ—Ñ—ñ—Ü—ñ–µ–Ω—Ç —Ç–µ—Ä–∏—Ç–æ—Ä—ñ–∞–ª—å–Ω–æ —Å–æ—Ü—ñ–∞–ª—å–Ω–æ-–µ–∫–æ–ª–æ–≥—ñ—á–Ω–∏—Ö –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç–µ–π <br/> (Kt)</th>
            <th>–ó–±–∏—Ç–æ–∫ <br/> (Z)</th>
        </tr>
        <tr *ngIf="loading" class="lr__table-tr loading">
            <th colspan="7">Loading...</th>
        </tr>
        <ng-container *ngFor="let object of objects; let j = index">
            <tr class="lr__table-tr loading" *ngFor="let info of object['losses']; let i = index">
                <!-- Info -->
                <td class="lr__table-td" *ngIf="i== 0" [attr.rowspan]="object['losses'].length">
                    {{object.id + 1}}
                    <div class="lr__table-td-controls">
                        <button (click)="onDelete(object.id)" class="delete">
                            <mat-icon>clear</mat-icon>
                        </button>
                        <button *ngIf="!object.isEditing" (click)="toggleObjectEdit(j)" class="edit">
                            <mat-icon>mode_edit</mat-icon>
                        </button>
                        <button *ngIf="object.isEditing" (click)="saveEditObject(j)" class="save">
                            <mat-icon>done</mat-icon>
                        </button>
                    </div>
                </td>
                <td class="lr__table-td name" *ngIf="i===0" [attr.rowspan]="object['losses'].length">
                    <span *ngIf="!object.isEditing">{{object.name}}</span>
                    <input *ngIf="object.isEditing" type="text"
                           [(ngModel)]="objects[j].name">
                    <a href="{{object['sources']}}">üõà</a>
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info['name']}}</span>
                    <input *ngIf="object.isEditing" type="text"
                           [(ngModel)]="objects[j]['losses'][i]['name']">
                </td>
                <!-- Emission -->
                <td>
                    <span *ngIf="!object.isEditing">{{info.qm}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['qm']">
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info.qnorm}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['qnorm']">
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info.T}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['T']">
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info.P}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['P']">
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info.GDK}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['GDK']">
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info.Knas}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['Knas']">
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info.Kf}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['Kf']">
                </td>
                <td>
                    <span *ngIf="!object.isEditing">{{info.Kz}}</span>
                    <input *ngIf="object.isEditing" type="number"
                           [(ngModel)]="objects[j]['losses'][i]['Kz']">
                </td>
                <!-- Calculated -->
                <td class="nowrap">
                    {{info.m  ? info.m.toFixed(3) : ' '}}
                </td>
                <td class="nowrap">
                    {{info.A ? info.A.toFixed(3) : ' '}}
                </td>
                <td class="nowrap">
                    {{info.Kt || ' '}}
                </td>
                <td class="nowrap">
                    {{info.Z || info.Z === 0 ? info.Z.toFixed(3) : ' '}}
                </td>
            </tr>
        </ng-container>
    </table>
    <div class="lr__table-control">
        <button class="lr__table-button" [disabled]="isChecked" (click)="calculateLosses()">
            –û–±—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–±–∏—Ç–∫–∏
        </button>
    </div>
</div>
